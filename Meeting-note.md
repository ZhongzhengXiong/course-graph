# 会议记录与线上讨论记录

## 开题讨论
**时间:** 20180421

**地点:** 机房

**议程:**

- 熟悉文档，圈出关键技术点
- 搭建代码共享机制，交换联系方式
- 估计任务量，设立时间节点，讨论分工方向

----
## 设计稿讨论
**时间:** 20180428

**地点:** 机房

**议程:**

- 讨论界面设计稿
- 讨论接口设计稿
- 讨论分工

### 界面设计
Ou 展示初稿。未完成，后面继续画。

Icon 网站：https://material.io/icons/

### 接口设计
Xiong 展示[接口设计文档]("./JSON-data-format-definition.md"])。

### 分工
Liu 和 Cheng 负责前端实现，Xiong 负责后台数据库设计和实现，Ou 负责后端事务层实现和接口测试。

----
## 中期讨论
**时间:** 20180522

**地点:** 机房

**议程:**

- 前端逻辑部分展示
- 前端界面展示
- 前后端接口结构讨论
- 数据库结构讨论

----
## 关于前后端交互的几个修改意见
**时间:** 20180527

**地点:** 线上

**内容:**

1. 建议同一使用 lecture 指代「课件」，不使用 slides 是因为 slides 的复数（多个课件）还是 slides，容易造成混乱，不使用 courseware 是因为这个单词在英文中不常使用。
2. 建议取消 homework 和 question 的层级关系，只保留 question，即直接在 node 中添加 question，不把 question 组织为 homework。
3. 建议增加「答案」（answer）这个资源，用以标记某个学生对于某个问题提交的答案。注意区分教师在创建题目时设置的标准答案（correct answer）和这里的学生提交的答案。同一个问题下，可以有不同学生提交的多个答案。这样，学生在回答一个问题时，前端只要发送创建一个 answer 资源的请求即可。
4. 建议使用 code 指代「课程代码」，与 id 作区分。
5. 建议使用 ISO 8601 标准作为前后端传输数据中所有涉及 **时间** 的格式（`<time>`）。
6. 用户对图谱中的节点操作（包括：增加节点、删除节点、修改节点文字内容、修改节点样式）建议在前端放在一起，并设置一个「编辑」按钮（调用 jsmind 提供的 enable editable）用来进入编辑模式，用户点击「保存修改」/「取消修改」按钮（调用 disable editable）来退出编辑模式。如果用户选择取消修改，则恢复旧版本的图；如果用户选择保存，则将编辑后的版本传到后端服务器存储。这样的好处有很多，一是省去了前端不断监控用户对于图的操作的工作（这个在 jsmind 里甚至不一定可行），二是省去了前后端传送数据的次数（否则用户任何的操作都需要被实时反馈到后端？？）。
7. 基于上一条，建议后端简化对于 Graph 和 Node 的管理，数据库里直接在 Graph 这个节点下存一个 jsmind 格式的 json，然后将一个课程的所有 Nodes 扁平化地储存在同一层级下（即 Graph 节点底下）。这样做有几个原因：1）前端按照上一条所述操作之后，后端维护 Graph 的结构信息和节点的文字内容、样式等都变得无用。2）前端在对作业、课件等的操作时，都是在某个已知 ID 的 Node 中操作的，而不会有诸如在某个节点的父节点中增加一个作业这样的操作，因此后端实际上只需要维护一个 Node 列表，并可以按照 ID 索引到即可。

